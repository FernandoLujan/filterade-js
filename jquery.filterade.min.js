/*!
# @author Fernando Lujan
#
# @title  Filterade.js
# @url    https://github.com/FernandoLujan/filterade-js
# @desc   Filters and pagination with options, from Canada
*/

(function(e,t,n,r){return e.fn.Filterade=function(t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;s={useFilters:false,filterControls:"#filter-controls",defaultFilter:"",selectAll:"all",usePagination:true,pageLimit:15,pageControls:"#page-controls",previousButtonClass:"previous",previousButtonLabel:"Previous",nextButtonClass:"next",nextButtonLabel:"Next",pagerClass:"page",activeClass:"active",log:false};i=e(this.selector);h=e(t.pageControls||s.pageControls);o=e(t.filterControls||s.filterControls);c=i.children();r=1;p=Math.ceil(c.length/t.pageLimit);a=[];n=0;f=function(){var n;if(t.usePagination||s.usePagination){n=0;c.each(function(){if(e(this).is(":visible")){return n++}});p=Math.ceil(n/(t.pageLimit||s.pageLimit));if(t.log||s.log){console.log("[Filterade.nodes.length]: "+n);return console.log("[Filterade.pageCount]: "+p)}}};d=function(){var n,i;if(t.usePagination||s.usePagination){h.empty();if(p>1){if(r!==1){h.prepend('<li><a href="#" class="'+(t.previousButtonClass||s.previousButtonClass)+'">'+(t.previousButtonLabel||s.previousButtonLabel)+"</a></li>")}for(n=i=1;1<=p?i<=p:i>=p;n=1<=p?++i:--i){h.append('<li><a href="#" class="'+(t.pagerClass||s.pagerClass)+'" data-page="'+ +n+'">'+n+"</a></li>")}if(r<p){h.append('<li><a href="#" class="'+(t.nextButtonClass||s.nextButtonClass)+'">'+(t.nextButtonLabel||s.nextButtonLabel)+"</a></li>")}h.find('a[data-page="'+r+'"]').addClass(t.activeClass||s.activeClass);h.find("a."+(t.pagerClass||s.pagerClass)).click(function(n){n.preventDefault();r=parseInt(e(this).attr("data-page"));h.find("a."+(t.activeClass||s.activeClass)).removeClass(t.activeClass||s.activeClass);h.find('a[data-page="'+r+'"]').addClass(t.activeClass||s.activeClass);return m()});h.find("a."+(t.previousButtonClass||s.previousButtonClass)).click(function(e){e.preventDefault();r--;return m()});return h.find("a."+(t.nextButtonClass||s.nextButtonClass)).click(function(e){e.preventDefault();r++;return m()})}}};v=function(){var n;if(t.usePagination||s.usePagination){n=0;return c.each(function(){if(e(this).is(":visible")){n++;if(n>r*(t.pageLimit||s.pageLimit)-(t.pageLimit||s.pageLimit)&&n<=(t.pageLimit||s.pageLimit)*r){return e(this).show()}else{return e(this).hide()}}})}};u=function(){c.show();if(t.useFilters||s.useFilters){if(a[n]===(t.selectAll||s.selectAll)){return c.each(function(){return e(this).show()})}else{return c.each(function(){if(e(this).attr("data-filter")!==a[n]){return e(this).hide()}})}}};m=function(){u();f();d();return v()};l=function(){if(t.useFilters||s.useFilters){o.find("input").each(function(t){return a[e(this).attr("value")||t]=e(this).attr("id")});if(t.log||s.log){console.log("[Filterade.filters]: "+a)}n=a.indexOf(t.defaultFilter||s.defaultFilter);if(t.log||s.log){console.log("[Filterade.activeFilter]: "+a[n])}o.find('input[checked="checked"]').attr("checked","");o.find('input[id="'+a[n]+'"]').attr("checked","checked");o.find("input").click(function(){n=a.indexOf(e(this).attr("id"));r=1;m();if(t.log){return console.log("[Filterade.activeFilter]: "+a[n])}})}return m()};return l()}})(jQuery,window,document)